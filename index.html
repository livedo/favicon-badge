<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Favicon Badge</title>
<!--    <link id="favicon" rel="icon" type="image/png" href="ical-icon-complete.png" /> -->

    <link id="favicon" rel="icon" type="image/png" href="favicon.png" />
    
  </head>

  <body>
    

<script>
(function () {
var canvas = document.createElement('canvas'),
    ctx,
    img = document.createElement('img'),
    link = document.getElementById('favicon').cloneNode(true);
    
if (canvas.getContext) {
  canvas.height = canvas.width = 16; // set the size
  ctx = canvas.getContext('2d');
  i=0;
}

function drawIconBadge() {
  img.onload = function () { // once the image has loaded
    ctx.drawImage(this, 0, 0);
    ctx.font = 'bold 10px "helvetica", sans-serif';
    ctx.fillStyle = '#F0EEDD';
    ctx.fillText(i++, 2, 12);
    link.href = canvas.toDataURL('image/png');
    document.body.appendChild(link);
  };
  img.src = 'favicon.png';
}



setInterval(function() {
  drawIconBadge();  
}, 1000);

})();
</script>    
  </body>

</html>